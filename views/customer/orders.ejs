<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/header') %> 
<body class="hold-transition layout-top-nav">
  <div class="wrapper">
    <%- include('../partials/navbar-user') %> 

    <%- include('../partials/footer') %> 
  </div>
  
  <%- include('../partials/scripts') %> 
</body>
</html>


<%- include('../partials/header') %>
<div class="container mb-5" style=" background-image: url('/images/R.jpg');">
  <div class="text-start fw-bold h3 mt-5">Orders</div>
  <!-- Tabs navs -->
  <ul class="nav nav-tabs mb-3" id="ex1" role="tablist">
    <li class="nav-item" role="presentation">
      <a
        class="nav-link active"
        id="ex1-tab-1"
        data-mdb-toggle="tab"
        href="#ex1-tabs-1"
        role="tab"
        aria-controls="ex1-tabs-1"
        aria-selected="true"
        >Pending</a
      >
    </li>
    <li class="nav-item" role="presentation">
      <a
        class="nav-link"
        id="ex1-tab-2"
        data-mdb-toggle="tab"
        href="#ex1-tabs-2"
        role="tab"
        aria-controls="ex1-tabs-2"
        aria-selected="false"
        >Approve</a
      >
    </li>
    <li class="nav-item" role="presentation">
      <a
        class="nav-link"
        id="ex1-tab-3"
        data-mdb-toggle="tab"
        href="#ex1-tabs-3"
        role="tab"
        aria-controls="ex1-tabs-3"
        aria-selected="false"
        >Declined</a
      >
    </li>

    <li class="nav-item" role="presentation">
      <a
        class="nav-link"
        id="ex1-tab-4"
        data-mdb-toggle="tab"
        href="#ex1-tabs-4"
        role="tab"
        aria-controls="ex1-tabs-4"
        aria-selected="false"
        >Cancelled</a
      >
    </li>
  </ul>
  <!-- Tabs content -->
  <div class="tab-content" id="ex1-content">
    <div
      class="tab-pane fade show active"
      id="ex1-tabs-1"
      role="tabpanel"
      aria-labelledby="ex1-tab-1"
    >
      <section id="pending">
        <%if(pen.length>0){%> <% pen.forEach(pd => { %>
        <div class="card border border-1 mb-4" style="border-radius: 10px">
          <div class="card-header">
            <div class="d-flex justify-content-between">
              <div class="h6">
                <br />
              </div>

              <div class="h6">
                <span class="badge bg-warning text-white">Pending</span>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-4 mb-3">
                <div class="card border border-1" style="border-radius: 10px">
                  <div class="card-body">
                    <div class="d-flex justify-content-center">
                      <img
                        src="/images/<%= pd.productimg %>"
                        height="100"
                        width="100"
                      />
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-8">
                <div class="d-flex justify-content-between">
                  <div class="fw-bold h4"><%= pd.productname %></div>
                </div>
                <div class="d-flex justify-content-between">
                  <div class="h5">Quantity: <%= pd.qty %></div>
                </div>
                <div class="d-flex justify-content-between">
                  <div class="h6">
                    Delivery Address: <%= pd.billingaddress %>
                  </div>
                </div>
                <div class="d-flex justify-content-between">
                  <div class="h6">Order by: <%= pd.fullname %></div>
                </div>

                <hr />
                <% total = 0; total = pd.productprice * pd.qty; %>
                <div class="fw-bold text-danger h4">Total: Php <%=total %></div>
              </div>
            </div>
          </div>

          <div class="card-footer">
            <form action="/cancel-orders" method="POST">
              <input type="hidden" name="orderid" value="<%= pd.orderid %>" />
              <div class="d-flex justify-content-end">
                <button
                  class="btn btn-danger btn-sm"
                  onclick="return confirm('Are you sure to cancel your order?')"
                  type="submit"
                >
                  Cancel Order
                </button>
              </div>
            </form>
          </div>
        </div>
        <%}); %> <%}else{%>

        <div class="text-center">No Pending Orders</div>
        <%}%>
      </section>
    </div>
    <div
      class="tab-pane fade"
      id="ex1-tabs-2"
      role="tabpanel"
      aria-labelledby="ex1-tab-2"
    >
      <section id="pending">
        <%if(app.length>0){%> <% app.forEach(ap => { %>
        <div class="card border border-1 mb-4" style="border-radius: 10px">
          <div class="card-header">
            <div class="d-flex justify-content-between">
              <div class="h6"><br /></div>

              <div class="h6">
                <span class="badge bg-success text-white">Approve</span>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-4 mb-3">
                <div class="card border border-1" style="border-radius: 10px">
                  <div class="card-body">
                    <div class="d-flex justify-content-center">
                      <img
                        src="/images/<%= ap.productimg %>"
                        height="100"
                        width="100"
                      />
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-8">
                <div class="d-flex justify-content-between">
                  <div class="fw-bold h4"><%= ap.productname %></div>
                </div>
                <div class="d-flex justify-content-between">
                  <div class="h5">Quantity: <%= ap.qty %></div>
                </div>
                <div class="d-flex justify-content-between">
                  <div class="h6">
                    Delivery Address: <%= ap.billingaddress %>
                  </div>
                </div>
                <div class="d-flex justify-content-between">
                  <div class="h6">Order by: <%= ap.fullname %></div>
                </div>

                <hr />
                <% total2 = 0; total2 = ap.productprice * ap.qty; %>
                <div class="fw-bold text-danger h4">
                  Total: Php <%=total2 %>
                </div>
              </div>
            </div>
          </div>
        </div>
        <%}); %> <%}else{%>

        <div class="text-center">No Approve Orders</div>
        <%}%>
      </section>
    </div>
    <div
      class="tab-pane fade"
      id="ex1-tabs-3"
      role="tabpanel"
      aria-labelledby="ex1-tab-3"
    >
      <section id="pending">
        <%if(dec.length>0){%> <% dec.forEach(dc => { %>
        <div class="card border border-1 mb-4" style="border-radius: 10px">
          <div class="card-header">
            <div class="d-flex justify-content-between">
              <div class="h6">
                <br />
              </div>

              <div class="h6">
                <span class="badge bg-danger text-white">Declined</span>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-4 mb-3">
                <div class="card border border-1" style="border-radius: 10px">
                  <div class="card-body">
                    <div class="d-flex justify-content-center">
                      <img
                        src="/images/<%= dc.productimg %>"
                        height="100"
                        width="100"
                      />
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-8">
                <div class="d-flex justify-content-between">
                  <div class="fw-bold h4"><%= dc.productname %></div>
                </div>
                <div class="d-flex justify-content-between">
                  <div class="h5">Quantity: <%= dc.qty %></div>
                </div>
                <div class="d-flex justify-content-between">
                  <div class="h6">
                    Delivery Address: <%= dc.billingaddress %>
                  </div>
                </div>
                <div class="d-flex justify-content-between">
                  <div class="h6">Order by: <%= dc.fullname %></div>
                </div>

                <hr />
                <% total3 = 0; total3 = dc.productprice * dc.qty; %>
                <div class="fw-bold text-danger h4">
                  Total: Php <%=total3 %>
                </div>
              </div>
            </div>
          </div>
        </div>
        <%}); %> <%}else{%>

        <div class="text-center">No Declined Orders</div>
        <%}%>
      </section>
    </div>

    <div
      class="tab-pane fade"
      id="ex1-tabs-4"
      role="tabpanel"
      aria-labelledby="ex1-tab-4"
    >
      <section id="pending">
        <%if(can.length>0){%> <% can.forEach(cn => { %>
        <div class="card border border-1 mb-4" style="border-radius: 10px">
          <div class="card-header">
            <div class="d-flex justify-content-between">
              <div class="h6">
                <br />
              </div>

              <div class="h6">
                <span class="badge bg-danger text-white">Cancelled</span>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-4 mb-3">
                <div class="card border border-1" style="border-radius: 10px">
                  <div class="card-body">
                    <div class="d-flex justify-content-center">
                      <img
                        src="/images/<%= cn.productimg %>"
                        height="100"
                        width="100"
                      />
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-8">
                <div class="d-flex justify-content-between">
                  <div class="fw-bold h4"><%= cn.productname %></div>
                </div>
                <div class="d-flex justify-content-between">
                  <div class="h5">Quantity: <%= cn.qty %></div>
                </div>
                <div class="d-flex justify-content-between">
                  <div class="h6">
                    Delivery Address: <%= cn.billingaddress %>
                  </div>
                </div>
                <div class="d-flex justify-content-between">
                  <div class="h6">Order by: <%= cn.fullname %></div>
                </div>

                <hr />
                <% total5 = 0; total4 = cn.productprice * cn.qty; %>
                <div class="fw-bold text-danger h4">
                  Total: Php <%=total4 %>
                </div>
              </div>
            </div>
          </div>
        </div>
        <%}); %> <%}else{%>

        <div class="text-center">No Cancelled Orders</div>
        <%}%>
      </section>
    </div>
  </div>

  <!-- Tabs content -->
</div>
<div style="height: 400px"></div>

<footer class="text-center text-white" style="background-color: #45637d">
  <!-- Grid container -->
  <div class="container p-4">
    <!-- Section: Iframe -->
    <section class=""></section>
    <!-- Section: Iframe -->
  </div>
  <!-- Grid container -->

  <!-- Copyright -->
  <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2)">
    © 2022 Copyright:
    <a class="text-white" href="https://mdbootstrap.com/">E-Care</a>
  </div>
  <!-- Copyright -->
</footer>
<%- include('../partials/footer') %> <% if (typeof (success) !== 'undefined'){
%>
<script>
  Swal.fire({
    title: "Success",
    icon: "success",
    text: "<%= success  %>",
    button: "Okay",
  });
</script>
<% } %>
